# Target Repository Structure

**Last Updated**: 2025-10-18 15:13:03
**Purpose**: Current vs. target repository structure with migration annotations
**Status**: Generated by Repository Structure Validation Agent

## Overview

This document maps the current backend repository structure against canonical specifications and provides annotations for required changes.

## Annotation Legend

- **[KEEP]**: File correctly located, follows canonical patterns
- **[DELETE]**: Obsolete file, should be removed (reason provided)
- **[UPDATE]**: File needs architecture compliance updates
- **[MOVE]**: File in wrong location, migration path provided
- **[CREATE]**: Missing file required by specs

## Validation Results

### Structure Alignment Summary

- **Correct Files**: 91
- **Misplaced Files**: 1
- **Missing Files**: 38
- **Obsolete Files**: 2

**Overall Status**: ❌ NEEDS ATTENTION

### Detailed Results

#### Correct Files (91)
- `__init__.py` - Required for package
- `__version__.py` - Package version information

**api/**
- `api/__init__.py` - Required for package
- `api/dependencies.py` - API_DOCUMENTATION.md - API dependencies and DI
- `api/health.py` - API_DOCUMENTATION.md - Health Endpoints section
- `api/main.py` - API_DOCUMENTATION.md - API Overview section

**api/middleware/**
- `api/middleware/__init__.py` - Required for package
- `api/middleware/correlation.py` - API_DOCUMENTATION.md - Request correlation middleware

**api/models/**
- `api/models/__init__.py` - Required for package
- `api/models/requests.py` - API_DOCUMENTATION.md - Request/Response models
- `api/models/responses.py` - API_DOCUMENTATION.md - Request/Response models

**api/routes/**
- `api/routes/__init__.py` - Required for package
- `api/routes/auth.py` - API_DOCUMENTATION.md - Authentication Endpoints section
- `api/routes/backtest.py` - API_DOCUMENTATION.md - Backtest Endpoints section
- `api/routes/capital.py` - API_DOCUMENTATION.md - Capital Management Endpoints section
- `api/routes/charts.py` - API_DOCUMENTATION.md - Charts Endpoints section
- `api/routes/config.py` - API_DOCUMENTATION.md - Configuration endpoints
- `api/routes/health.py` - API_DOCUMENTATION.md - Health Endpoints section
- `api/routes/live_trading.py` - API_DOCUMENTATION.md - Live Trading Endpoints section
- `api/routes/results.py` - API_DOCUMENTATION.md - Results & Export Endpoints section
- `api/routes/strategies.py` - API_DOCUMENTATION.md - Strategy Information Endpoints section

**core/**
- `core/__init__.py` - Required for package

**core/components/**
- `core/components/__init__.py` - Required for package
- `core/components/exposure_monitor.py` - 02_EXPOSURE_MONITOR.md
- `core/components/position_monitor.py` - 01_POSITION_MONITOR.md
- `core/components/position_update_handler.py` - 11_POSITION_UPDATE_HANDLER.md
- `core/components/risk_monitor.py` - 03_RISK_MONITOR.md
- `core/components/strategy_manager.py` - 05_STRATEGY_MANAGER.md

**core/event_engine/**
- `core/event_engine/__init__.py` - Required for package
- `core/event_engine/event_driven_strategy_engine.py` - 15_EVENT_DRIVEN_STRATEGY_ENGINE.md

**core/execution/**
- `core/execution/__init__.py` - Required for package
- `core/execution/venue_interface_manager.py` - 07_VENUE_INTERFACE_MANAGER.md

**core/health/**
- `core/health/__init__.py` - Required for package
- `core/health/component_health.py` - HEALTH_ERROR_SYSTEMS.md
- `core/health/unified_health_manager.py` - HEALTH_ERROR_SYSTEMS.md

**core/interfaces/**
- `core/interfaces/__init__.py` - Required for package
- `core/interfaces/base_execution_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/base_position_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/cex_execution_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/cex_position_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/dex_execution_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/onchain_execution_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/onchain_position_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/transfer_execution_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/transfer_position_interface.py` - 07A_VENUE_INTERFACES.md
- `core/interfaces/venue_interface_factory.py` - 07B_VENUE_INTERFACE_FACTORY.md

**core/math/**
- `core/math/__init__.py` - Required for package
- `core/math/health_calculator.py` - HEALTH_ERROR_SYSTEMS.md - Health calculations
- `core/math/ltv_calculator.py` - WORKFLOW_GUIDE.md - LTV calculations
- `core/math/margin_calculator.py` - WORKFLOW_GUIDE.md - Margin calculations
- `core/math/metrics_calculator.py` - API_DOCUMENTATION.md - Metrics calculation

**core/services/**
- `core/services/__init__.py` - Required for package
- `core/services/backtest_service.py` - 13_BACKTEST_SERVICE.md
- `core/services/live_service.py` - 14_LIVE_TRADING_SERVICE.md

**core/strategies/**
- `core/strategies/__init__.py` - Required for package
- `core/strategies/base_strategy_manager.py` - 5B_BASE_STRATEGY_MANAGER.md
- `core/strategies/btc_basis_strategy.py` - MODES.md
- `core/strategies/eth_basis_strategy.py` - MODES.md
- `core/strategies/eth_leveraged_strategy.py` - MODES.md
- `core/strategies/eth_staking_only_strategy.py` - MODES.md
- `core/strategies/pure_lending_usdt_strategy.py` - MODES.md
- `core/strategies/strategy_factory.py` - 5A_STRATEGY_FACTORY.md

**core/utilities/**
- `core/utilities/__init__.py` - Required for package
- `core/utilities/utility_manager.py` - 16_MATH_UTILITIES.md - Utility management

**infrastructure/**
- `infrastructure/__init__.py` - Required for package

**infrastructure/api/**
- `infrastructure/api/__init__.py` - Required for package
- `infrastructure/api/api_call_queue.py` - 09_API_CALL_QUEUE.md

**infrastructure/config/**
- `infrastructure/config/__init__.py` - Required for package
- `infrastructure/config/config_loader.py` - 19_CONFIGURATION.md - Configuration loading
- `infrastructure/config/config_manager.py` - 19_CONFIGURATION.md - Configuration management
- `infrastructure/config/config_validator.py` - 19_CONFIGURATION.md - Configuration validation
- `infrastructure/config/environment_loader.py` - ENVIRONMENT_VARIABLES.md - Environment variable loading
- `infrastructure/config/models.py` - 19_CONFIGURATION.md - Configuration models

**infrastructure/data/**
- `infrastructure/data/__init__.py` - Required for package
- `infrastructure/data/data_provider_factory.py` - 05_DATA_PROVIDER_FACTORY.md
- `infrastructure/data/data_validator.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/live_data_provider.py` - 09_DATA_PROVIDER.md

**infrastructure/health/**
- `infrastructure/health/__init__.py` - Required for package
- `infrastructure/health/health_checker.py` - HEALTH_ERROR_SYSTEMS.md

**infrastructure/logging/**
- `infrastructure/logging/__init__.py` - Required for package
- `infrastructure/logging/structured_logger.py` - Required for logging

**infrastructure/monitoring/**
- `infrastructure/monitoring/__init__.py` - Required for package
- `infrastructure/monitoring/logging.py` - API_DOCUMENTATION.md - Logging and monitoring
- `infrastructure/monitoring/metrics.py` - API_DOCUMENTATION.md - Metrics collection

**infrastructure/persistence/**
- `infrastructure/persistence/__init__.py` - Required for package
- `infrastructure/persistence/async_results_store.py` - 18_RESULTS_STORE.md - Async results storage
- `infrastructure/persistence/result_store.py` - 18_RESULTS_STORE.md - Results storage

**infrastructure/storage/**
- `infrastructure/storage/__init__.py` - Required for package
- `infrastructure/storage/chart_storage.py` - API_DOCUMENTATION.md - Charts Endpoints section

**infrastructure/visualization/**
- `infrastructure/visualization/__init__.py` - Required for package
- `infrastructure/visualization/chart_generator.py` - API_DOCUMENTATION.md - Charts Endpoints section

#### Misplaced Files (1)
- `infrastructure/logging/domain_event_logger.py` → `infrastructure/logging/event_logger.py` - 08_EVENT_LOGGER.md

#### Missing Files (38)
- `core/execution/execution_manager.py` - Venue-centric architecture requirement
- `docs/specs/06_VENUE_MANAGER.md` - Venue-centric architecture requirement
- `core/strategies/usdt_market_neutral_no_leverage_strategy.py` - MODES.md
- `core/strategies/usdt_market_neutral_strategy.py` - MODES.md
- `core/execution/execution_manager.py` - 06_VENUE_MANAGER.md
- `core/execution/wallet_transfer_executor.py` - Required for execution
- `core/math/pnl_monitor.py` - 04_pnl_monitor.md - P&L calculation
- `core/reconciliation/reconciliation_component.py` - 10_RECONCILIATION_COMPONENT.md
- `core/reconciliation/__init__.py` - Required for package
- `core/error_codes/error_code_registry.py` - HEALTH_ERROR_SYSTEMS.md
- `core/error_codes/exceptions.py` - HEALTH_ERROR_SYSTEMS.md
- `core/error_codes/__init__.py` - Required for package
- `core/instructions/execution_instructions.py` - WORKFLOW_GUIDE.md - Execution instructions
- `core/instructions/__init__.py` - Required for package
- `core/rebalancing/__init__.py` - Required for package
- `infrastructure/data/base_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/btc_basis_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/config_driven_historical_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/eth_basis_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/eth_leveraged_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/eth_staking_only_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/historical_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/ml_directional_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/pure_lending_usdt_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/usdt_market_neutral_data_provider.py` - 09_DATA_PROVIDER.md
- `infrastructure/data/usdt_market_neutral_no_leverage_data_provider.py` - 09_DATA_PROVIDER.md
- `venue_adapters/aave_adapter.py` - docs/VENUE_ARCHITECTURE.md - AAVE V3 lending/borrowing integration
- `venue_adapters/morpho_adapter.py` - docs/VENUE_ARCHITECTURE.md - Morpho flash loan integration
- `venue_adapters/alchemy_adapter.py` - docs/VENUE_ARCHITECTURE.md - Alchemy RPC provider integration
- `venue_adapters/binance_adapter.py` - docs/VENUE_ARCHITECTURE.md - Binance CEX trading integration
- `venue_adapters/bybit_adapter.py` - docs/VENUE_ARCHITECTURE.md - Bybit CEX trading integration
- `venue_adapters/etherfi_adapter.py` - docs/VENUE_ARCHITECTURE.md - EtherFi liquid staking integration
- `venue_adapters/instadapp_adapter.py` - docs/VENUE_ARCHITECTURE.md - Instadapp atomic transaction middleware integration
- `venue_adapters/lido_adapter.py` - docs/VENUE_ARCHITECTURE.md - Lido liquid staking integration
- `venue_adapters/ml_inference_api_adapter.py` - docs/VENUE_ARCHITECTURE.md - ML inference API integration
- `venue_adapters/okx_adapter.py` - docs/VENUE_ARCHITECTURE.md - OKX CEX trading integration
- `venue_adapters/uniswap_adapter.py` - docs/VENUE_ARCHITECTURE.md - Uniswap DEX trading integration
- `venue_adapters/__init__.py` - Required for package

#### Obsolete Files (2)
- `core/execution/execution_manager.py` - Legacy execution-centric naming - should be venue-centric
- `docs/specs/07_VENUE_INTERFACE_MANAGER.md` - Legacy execution-centric spec - should be venue-centric

## Summary

This structure validation was performed on 2025-10-18 15:13:03 and shows the current state of the repository structure against canonical specifications.

**Status**: ❌ NEEDS ATTENTION

**Total Files Analyzed**: 132

**Next Steps**: Review the misplaced, missing, and obsolete files listed above and take appropriate action.
